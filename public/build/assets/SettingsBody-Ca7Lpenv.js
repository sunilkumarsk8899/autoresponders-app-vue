import{r as u,b as M,d as K,s as d,o as s,c as o,j as v,e as i,g as _,F as C,k as A,t as m,h as g,v as b}from"./app-jZI65Cpt.js";import{S as P}from"./sweetalert2-z6gKu1nJ.js";const T={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},N={key:0,class:"loader"},R={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},Y={class:"p-6 gap-3"},$={class:"row"},j={key:0,class:"col"},q={class:"row mb-3"},z={class:"col text-right"},G=["for"],H=["onUpdate:modelValue","name","id"],J=["for"],O=["onUpdate:modelValue","name","id"],Q=["onClick"],W={key:1,class:"col"},X={class:"row mb-3"},Z={class:"col text-right"},x=["for"],aa=["onUpdate:modelValue","name","id"],ea=["for"],ta=["onUpdate:modelValue","name","id"],ia=["onClick"],la={__name:"SettingsBody",props:{settingsString:{type:String,default:""},is_page:{type:String,default:"clickbank"}},setup(y){u(!1),M(()=>{console.log("mounted"),I(),L()});const S=K.useToast(),p=(e="success",t)=>{S.open({message:t,type:e,duration:3e3,position:"top-right"})},k=u({}),h=u({}),n=u({clickbank_apiurl:[""],clickbank_captain_key:[""],type:"clickbank",clickbank_id:[]}),c=u({activecampaign_apiurl:[""],activecampaign_apikey:[""],activecampaign_list_id:[""],type:"activecampaign",activecampaign_id:[]});k.value={clickbank_apiurl:[],clickbank_captain_key:[]},h.value={activecampaign_apiurl:[],activecampaign_apikey:[],activecampaign_list_id:[]};const f=async(e,t)=>{try{const l=await d.post("/api/v1/add-setting",t.value);console.log("Data saved:",l.data),e.value={},p("success",`Add ${t.value.type} Setting saved successfully`)}catch(l){console.error("Error saving data:",l.response.data),e.value=l.response.data.errors,p("error","Somthing wen't wrong!")}finally{}},E=async()=>{f(k,n)},B=()=>{f(h,c)},D=()=>{n.value.clickbank_apiurl.push(""),n.value.clickbank_captain_key.push("")},U=()=>{c.value.activecampaign_apiurl.push(""),c.value.activecampaign_apikey.push(""),c.value.activecampaign_list_id.push("")},w=async()=>(await P.fire({title:"Are you sure?",text:"This action will permanently delete the setting!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"})).isConfirmed,F=async(e,t)=>{n.value.clickbank_apiurl.splice(e,1),n.value.clickbank_captain_key.splice(e,1);try{if(await w()){const l=await d.post("/api/v1/delete-setting",{id:t});console.log("Data deleted:",l.data),k.value={},n.value.clickbank_apiurl.splice(e,1),n.value.clickbank_captain_key.splice(e,1),n.value.clickbank_id.splice(e,1),p("success","Delete ClickBank Setting successfully")}}catch(l){console.error("Error deleting data:",l.response),p("error","Something went wrong!")}},V=async(e,t)=>{try{if(await w()){const l=await d.post("/api/v1/delete-setting",{id:t});console.log("Data deleted:",l.data),k.value={},c.value.activecampaign_apiurl.splice(e,1),c.value.activecampaign_apikey.splice(e,1),c.value.activecampaign_list_id.splice(e,1),p("success","Delete Active Campaign Setting successfully")}}catch(l){console.error("Error deleting data:",l.response),p("error","Something went wrong!")}},I=async()=>{try{const e=await d.get("/api/v1/clickbank/get-settings");e.data.data&&Array.isArray(e.data.data)&&(n.value.clickbank_apiurl=[],n.value.clickbank_captain_key=[],e.data.data.forEach((t,l)=>{n.value.clickbank_apiurl.push(t.url),n.value.clickbank_captain_key.push(t.key),n.value.clickbank_id.push(t.id)}))}catch(e){console.log("Error getting data",e)}},L=async()=>{try{const e=await d.get("/api/v1/activecampaign/get-settings");e.data.data&&Array.isArray(e.data.data)&&(c.value.activecampaign_apiurl=[],c.value.activecampaign_apikey=[],c.value.activecampaign_list_id=[],e.data.data.forEach((t,l)=>{c.value.activecampaign_apiurl.push(t.url),c.value.activecampaign_apikey.push(t.key),c.value.activecampaign_list_id.push(t.list_id),c.value.activecampaign_id.push(t.id)})),console.log("Data fetched active campaign successfully:",e.data.data)}catch(e){console.log("Error getting data",e)}};return(e,t)=>(s(),o("div",T,[e.loading?(s(),o("div",N,"Loading...")):v("",!0),i("div",R,[i("div",Y,[i("div",$,[y.is_page=="clickbank"?(s(),o("div",j,[i("div",q,[i("div",z,[i("button",{onClick:_(D,["prevent"]),class:"btn btn-primary clickbank_add_more"},"Add More")])]),i("form",{onSubmit:_(E,["prevent"]),id:"clickbank_form"},[(s(!0),o(C,null,A(n.value.clickbank_apiurl,(l,a)=>(s(),o("div",{key:a,class:"form-group mb-3"},[t[0]||(t[0]=i("input",{type:"hidden"},null,-1)),i("label",{for:"clickbank-apiurl-"+a},"API URL "+m(a+1),9,G),g(i("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":r=>n.value.clickbank_apiurl[a]=r,name:"clickbank_apiurl["+a+"]",id:"clickbank-apiurl-"+a,placeholder:"Enter API URL"},null,8,H),[[b,n.value.clickbank_apiurl[a]]]),i("label",{for:"clickbank-captain-key-"+a},"CLICKBANK CAPTAIN KEY "+m(a+1),9,J),g(i("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":r=>n.value.clickbank_captain_key[a]=r,name:"clickbank_captain_key["+a+"]",id:"clickbank-captain-key-"+a,placeholder:"Enter Clickbank Captain Key"},null,8,O),[[b,n.value.clickbank_captain_key[a]]]),n.value.clickbank_apiurl.length>1?(s(),o("button",{key:0,type:"button",onClick:r=>F(a,n.value.clickbank_id[a]),class:"btn btn-danger w-100 mb-5"},"Delete",8,Q)):v("",!0)]))),128)),t[1]||(t[1]=i("button",{type:"submit",class:"btn btn-primary"},"Submit",-1))],32)])):y.is_page=="activecampaign"?(s(),o("div",W,[i("div",X,[i("div",Z,[i("button",{onClick:_(U,["prevent"]),class:"btn btn-primary activecampaign_add_more"},"Add More")])]),i("form",{onSubmit:_(B,["prevent"]),id:"activecampaign_form"},[(s(!0),o(C,null,A(c.value.activecampaign_apiurl,(l,a)=>(s(),o("div",{key:a,class:"form-group mb-3"},[i("label",{for:"activecampaign-apiurl-"+a},"API URL "+m(a+1),9,x),g(i("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":r=>c.value.activecampaign_apiurl[a]=r,name:"activecampaign_apiurl["+a+"]",id:"activecampaign-apiurl-"+a,placeholder:"Enter API URL"},null,8,aa),[[b,c.value.activecampaign_apiurl[a]]]),i("label",{for:"activecampaign-captain-key-"+a},"API KEY "+m(a+1),9,ea),g(i("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":r=>c.value.activecampaign_apikey[a]=r,name:"activecampaign_captain_key["+a+"]",id:"activecampaign-captain-key-"+a,placeholder:"Enter activecampaign Captain Key"},null,8,ta),[[b,c.value.activecampaign_apikey[a]]]),c.value.activecampaign_apiurl.length>1?(s(),o("button",{key:0,type:"button",onClick:r=>V(a,c.value.activecampaign_id[a]),class:"btn btn-danger w-100 mb-5"},"Delete",8,ia)):v("",!0)]))),128)),t[2]||(t[2]=i("button",{type:"submit",class:"btn btn-primary"},"Submit",-1))],32)])):v("",!0)])])])]))}};export{la as _};

import{d as J,Q as D,r as o,b as K,o as n,c as i,a as m,u as _,Z as R,w as S,e as s,i as W,n as X,f as Y,g as ee,h as P,v as V,t as d,j as u,F as p,k as v}from"./app-jZI65Cpt.js";import{_ as te}from"./AuthenticatedLayout-zC3V_ZqV.js";import{s as ae}from"./vue-multiselect.min-bO7X9CGe.js";import"./ApplicationLogo-BHU40evo.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const se={class:"py-12"},oe={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},ne={class:"overflow-hidden bg-white shadow-sm sm:rounded-lg"},ie={class:"p-6 text-gray-900"},le={class:"container"},ce={class:"row mt-5"},re={class:"col"},de={class:"form-group mb-3"},ue={key:0,id:"",class:"form-text text-danger"},pe={class:"form-group mb-3"},me={key:0,id:"",class:"form-text text-danger"},ve={class:"form-group mb-3"},ge=["value"],ke={key:0,class:"form-group mb-3"},_e=["value"],be={key:1,class:"form-group mb-3"},ye={class:"form-group mb-3"},fe=["value"],Ce={key:2,class:"form-group mb-3"},we=["value"],Ve={__name:"EditCampaign",props:{settings:Object},setup(N){const $=J.useToast(),g=(t="success",e)=>{$.open({message:e,type:t,duration:3e3,position:"top-right"})},I=N,b=window.location.pathname.split("/")[2];D().props.auth.user.id;const L=D().props.auth.user,{id:U}=L,E=U;o("");const y=o({}),f=o(!1),C=o(!1);o({});const w=o({}),A=o({}),x=o(!1),k=o(""),h=o("");o("");const B=o("");K(()=>{console.log("mouted"),F(),T(),M()});const c=o({name:"",description:""}),l=o({name:"",desc:"",user_id:E,clickbank_id:42,clickbank_account_name:"",selected_clickbank_products_name:[],active_campaign_id:"",active_campaign_list_id:""}),F=async()=>{try{const t=await axios.get(`/api/v1/get-campaigns/${b}/single`);l.value=t.data.campaign,console.log(t.data.campaign)}catch(t){console.log(t)}},H=async()=>{var t,e;c.value={};try{const a=new FormData;a.append("name",l.value.name),a.append("description",l.value.description),a.append("user_id",l.value.user_id),a.append("id",b);const r=await axios.post("/api/v1/update/campaign",a);console.log(r.data),g("success","Campaign updated successfully!")}catch(a){a.response&&a.response.data?(console.log("errors",a.response.data),c.value.name=(t=a.response.data.errors)!=null&&t.name?a.response.data.errors.name[0]:"",c.value.description=(e=a.response.data.errors)!=null&&e.description?a.response.data.errors.description[0]:"",g("error","All Fields are required")):(console.error("An unexpected error occurred:",a),g("error","An unexpected error occurred. Please try again."))}},T=async()=>{try{const e=await axios.get("/api/v1/get-accounts/clickbank");y.value=e.data.data}catch(t){console.log(t)}},M=async()=>{try{const e=await axios.get("/api/v1/get-accounts/activecampaign");w.value=e.data.data}catch(t){console.log(t)}},O=async t=>{try{const e=await axios.get(`/api/v1/get-active-campaing/lists/${t}`);A.value=e.data.data.lists}catch(e){console.log(e)}},j=async()=>{try{let t=k.value;const e=await axios.get(`/api/v1/clickbank/get/${t}/accounts`);console.log("all accounts",e.data),h.value=e.data.response.accountData}catch(t){console.log(t)}},q=async()=>{try{let t=k.value,e=l.value.clickbank_account_name;const a=await axios.get(`/api/v1/clickbank/get/${t}/products/${e}`);B.value=a.data.response.products.product}catch(t){console.log(t)}},z=t=>{f.value=!0,l.value.clickbank_id=t.target.value,k.value=t.target.value,j()},Q=t=>{C.value=!0,l.value.clickbank_account_name=t.target.value,q()},Z=t=>{x.value=!0;const e=t.target.value;l.value.active_campaign_id=t.target.value,O(e),console.log("active campaing list id",e)},G=t=>{l.value.active_campaign_list_id=t.target.value};return(t,e)=>(n(),i(p,null,[m(_(R),{title:I.settings.title},null,8,["title"]),m(te,null,{default:S(()=>[s("div",se,[s("div",oe,[s("div",ne,[s("div",ie,[m(_(W),{href:t.route("dashboard"),class:X(["rounded-md px-3 py-2 text-white ring-1 ring-transparent transition",t.route().current("campaign.add")?"btn btn-info":"btn btn-secondary"])},{default:S(()=>e[3]||(e[3]=[Y(" Campaign List ")])),_:1},8,["href","class"])])])])]),s("div",le,[s("div",ce,[s("div",re,[s("form",{onSubmit:ee(H,["prevent"])},[s("div",de,[e[4]||(e[4]=s("label",{for:"name"},"Name",-1)),P(s("input",{type:"text",class:"form-control",id:"name",placeholder:"Enter Name","onUpdate:modelValue":e[0]||(e[0]=a=>l.value.name=a)},null,512),[[V,l.value.name]]),c.value.name?(n(),i("small",ue,d(c.value.name),1)):u("",!0)]),s("div",pe,[e[5]||(e[5]=s("label",{for:"desc"},"Description",-1)),P(s("input",{type:"text",class:"form-control",id:"desc",placeholder:"Enter Description","onUpdate:modelValue":e[1]||(e[1]=a=>l.value.description=a)},null,512),[[V,l.value.description]]),c.value.description?(n(),i("small",me,d(c.value.description),1)):u("",!0)]),s("div",ve,[e[7]||(e[7]=s("label",{for:"desc"},"ClickBank API Accounts",-1)),s("select",{name:"",id:"",class:"w-100 rounded",style:{"border-color":"#dee2e6"},onChange:z},[e[6]||(e[6]=s("option",{value:""},"Select ClickBank API Account",-1)),(n(!0),i(p,null,v(y.value,(a,r)=>(n(),i("option",{key:r,value:a.id},d(a.name),9,ge))),128))],32)]),f.value?(n(),i("div",ke,[e[9]||(e[9]=s("label",{for:"desc"},"ClickBank User Accounts",-1)),s("select",{name:"",id:"",class:"w-100 rounded",style:{"border-color":"#dee2e6"},onChange:Q},[e[8]||(e[8]=s("option",{value:""},"Select ClickBank User Account",-1)),(n(!0),i(p,null,v(h.value,(a,r)=>(n(),i("option",{key:r,value:a.nickName},d(a.nickName),9,_e))),128))],32)])):u("",!0),C.value?(n(),i("div",be,[e[10]||(e[10]=s("label",{for:"clickbank-products"},"ClickBank Products",-1)),m(_(ae),{modelValue:t.selectedClickbankProducts,"onUpdate:modelValue":e[2]||(e[2]=a=>t.selectedClickbankProducts=a),options:B.value,multiple:!0,"track-by":"@sku",label:"@sku",placeholder:"Select ClickBank Products",class:"w-100"},null,8,["modelValue","options"])])):u("",!0),s("div",ye,[e[12]||(e[12]=s("label",{for:"desc"},"Active API Campaign",-1)),s("select",{name:"",id:"",class:"w-100 rounded",style:{"border-color":"#dee2e6"},onChange:Z},[e[11]||(e[11]=s("option",{value:""},"Select ActiveCampaign Account",-1)),(n(!0),i(p,null,v(w.value,(a,r)=>(n(),i("option",{key:a.id,value:a.id},d(a.name),9,fe))),128))],32)]),x.value?(n(),i("div",Ce,[e[14]||(e[14]=s("label",{for:"desc"},"Active Campaign Lists",-1)),s("select",{name:"",id:"",class:"w-100 rounded",style:{"border-color":"#dee2e6"},onChange:G},[e[13]||(e[13]=s("option",{value:""},"Select ActiveCampaign Account",-1)),(n(!0),i(p,null,v(A.value,(a,r)=>(n(),i("option",{key:a.id,value:a.id},d(a.name),9,we))),128))],32)])):u("",!0),e[15]||(e[15]=s("button",{type:"submit",class:"btn btn-primary"},"Submit",-1))],32)])])])]),_:1})],64))}};export{Ve as default};
